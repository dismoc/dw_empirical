etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
t1[[1]] <- feols(log(dwsores) ~ log(ppp_so_reserves) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
descr(sf3$lfsores)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves+1) +  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) +  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t1[[1]] <- feols(log(dwsores+1) ~ log(delt_so_reserves) +  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(delt_so_reserves)  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(delt_so_reserves+1)  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves+1)  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves)  | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(lfsores+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves):log(lfsores+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(lfsores+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
sf3 <- subset(sf2, Date >= as.Date('2020-04-03') & Date <= as.Date('2020-08-08'))
sf3 <- sf3[!duplicated(sf3[c("RSSD", "Date")]),]
sf3 <- sf3 %>% drop_na(RSSD, Date, State, size_quint)
sf3 <- sf3[!sf3$Reserves ==0,]
t1 <- list()
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(lfsores+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
sf3 <- sf3[!sf3$delt_so_reserves <= 0,]
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1 <- list()
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + month,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = 'RSSD')
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'size_quint')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = 'RSSD')
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'size_quint')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
ls <- unique(data.frame(IDRSSD = df$IDRSSD, ABA = df$Primary.ABA.Routing.Number, STATE = df$Financial.Institution.State))
ls <- unique(smartbind(ls,data.frame(att)))
sf2 <- aggregate(InitialApprovalAmount ~ rssd + DateApproved, pppm, sum)
sf2 <- full_join(sf2, unique(df[,c('IDRSSD','Primary.ABA.Routing.Number')]), by=c('rssd' = 'IDRSSD'))
sf2 <- left_join(sf2, ls, by=c('rssd' = 'IDRSSD'))
sf2$ABA <- coalesce(sf2$Primary.ABA.Routing.Number, sf2$ABA)
sf2 <- data.frame(RSSD = sf2$rssd, Date = sf2$DateApproved, ABA = sf2$ABA, State = sf2$STATE, PPP = sf2$InitialApprovalAmount)
sf2 <- full_join(sf2,
left_join(data.frame(aggregate(Original.Outstanding.Advance.Amount ~ Institution.RSSD + Date.Of.Advance, pplf, sum)),
pplf[,c('Institution.RSSD', 'Date.Of.Advance', 'origin_date')]),
by=c('RSSD' = 'Institution.RSSD', 'Date' = 'Date.Of.Advance'))
dwborrow1 <- dwborrow
dwborrow1$Borrower.ABA.number <- as.numeric(dwborrow1$Borrower.ABA.number)
dwborrow1 <- subset(dwborrow1,Loan.date >= as.Date('2020-04-03') & Loan.date <= as.Date('2020-08-08'))
sf2 <- full_join(sf2,dwborrow1[,c('Loan.date','Borrower.ABA.number','Loan.amount','Borrower.state')], by=c('ABA' = 'Borrower.ABA.number', 'Date' = 'Loan.date'))
sf2[is.na(sf2$Original.Outstanding.Advance.Amount),c('Original.Outstanding.Advance.Amount')] <- 0
sf2[is.na(sf2$Loan.amount),c('Loan.amount')] <- 0
sf2[is.na(sf2$PPP) == TRUE, 'PPP'] <- 0
sf2 <- sf2[!is.na(sf2$Date),]
sf2[is.na(sf2$ABA) == TRUE,'ABA'] <- ls[match(sf2[is.na(sf2$ABA) == TRUE,'RSSD'],ls$IDRSSD),'ABA']
sf2[is.na(sf2$RSSD) == TRUE,'RSSD'] <- ls[match(sf2[is.na(sf2$RSSD) == TRUE,'ABA'],ls$ABA),'IDRSSD']
keep <- c('Date','size','IDRSSD','reserve_asset_ratio','reserve_loan_ratio','RCON0071','RCON0081','eqcaprat','age','borr_total','FED','exposure','OFFICES', 'aq', 'roe','RCONB529','RCON2170')
temp <- subset(df, as.Date(Date) >= as.Date('2020-03-31'))[,keep]
temp$Date <- as.Date(temp$Date)
sf2$Quarter <- as.Date(quarter(sf2$Date, type='date_first')-1)
sf2 <- left_join(sf2, temp, by=c('RSSD' = 'IDRSSD', 'Quarter' = 'Date'))
setnames(sf2, old=c('Original.Outstanding.Advance.Amount', 'Loan.amount'),
new = c('PPPLF','DW'))
sf2$Reserves <- (sf2$RCON0081 + sf2$RCON0071)*1000
sf2$lsa <- sf2$RCONB529/sf2$RCON2170
sf2$dwsores <- sf2$DW*100/sf2$Reserves
sf2$dwbin_notest <- ifelse(sf2$dwsores > .01, 1,0)
sf2$dwbin_notest <- ifelse(is.na(sf2$dwbin_notest) == TRUE, 0, sf2$dwbin_notest)
sf2$dwsores <- ifelse(sf2$dwbin_notest == 1, sf2$dwsores, 0)
sf2$dw_bin <- ifelse(sf2$DW > 0, 1, 0)
#sf2$dw_bin <- ifelse(is.na(sf2$dw_bin) == FALSE, sf2$dw_bin, 0)
sf2$PPPLF_ind <- ifelse(sf2$PPPLF > 0, 1, 0)
sf2$r_delt <- -sf2$PPPLF + sf2$PPP
sf2 <- sf2[order(sf2$RSSD,sf2$Date),]
sf2 <- sf2 %>% group_by(RSSD) %>% mutate(cs_ppp = cumsum(PPP), cs_delt = cumsum(r_delt))
sf2$month <- month(sf2$Date)
sf2$cs_ppp <- sf2$cs_ppp/sf2$Reserves
sf2$ppp_so_reserves <- sf2$PPP*100/sf2$Reserves
sf2$ppp_so_reserves <- ifelse(is.na(sf2$ppp_so_reserves) == TRUE, 0, sf2$ppp_so_reserves)
sf2$lfsores <- sf2$PPPLF/sf2$Reserves
sf2$delt_so_reserves <- sf2$r_delt*100/sf2$Reserves
temp <- aggregate(cbind(size,reserve_asset_ratio) ~ RSSD, sf2, mean) %>% mutate(size_quint = ntile(size,50), shock_quint = ntile(reserve_asset_ratio,5))
sf2 <- left_join(sf2, temp[,c('RSSD','size_quint','ra_quint')], by = 'RSSD')
temp <-aggregate(cbind(PPP,DW,PPPLF) ~ RSSD, sf2, sum)
temp$PPPLF_i <- ifelse(temp$PPPLF > 0, 1, 0)
temp$DW_i <- ifelse(temp$DW > 0, 1, 0)
temp$PPP_i <- ifelse(temp$PPP > 0, 1, 0)
sf2 <- left_join(sf2,temp[,c('RSSD','PPPLF_i','DW_i','PPP_i')])
sf2$State <- coalesce(sf2$State, sf2$Borrower.state)
#Create series on whether bank has accessed the LF within the past month
t <- aggregate(cbind(PPPLF_ind,PPPLF) ~ RSSD + Date, sf2, sum) %>% group_by(RSSD) %>% arrange(RSSD, Date)
t <- t %>% group_by(RSSD) %>%
complete(Date = full_seq(Date, period = 1), fill = list(PPPLF_ind = 0)) %>%
mutate(LF_30i = rollapplyr(PPPLF_ind, width = 30, FUN = sum, partial = TRUE),
LF_30 = rollapplyr(PPPLF, width = 30, FUN = sum, partial = TRUE)) %>%
drop_na()
t$LF_30i <- ifelse(t$LF_30 > 0, 1, 0)
sf2 <- left_join(sf2,t[,c('RSSD','Date','LF_30')],by=c('RSSD','Date'))
sf2$LF_30 <- sf2$LF_30/sf2$Reserves
sf2$LF_30 <- ifelse(is.na(sf2$LF_30) == TRUE, 0, sf2$LF_30)
sf2 <- left_join(sf2,binstr,by=c('RSSD'='IDRSSD','Date'))
# create series on whether bank has used DW 5 years pre-covid
dwborrow1 <- subset(dwborrow, Loan.date >= '2015-04-03' & Loan.date < '2020-04-03')
ls <- intersect(unique(sf2$ABA),unique(dwborrow1$Borrower.ABA.number))
sf2[sf2$ABA %in% ls, 'precovdw'] <- 1
sf2$precovdw <- ifelse(is.na(sf2$precovdw) == TRUE, 0, 1)
#Creating the shift share instrument
#Why instrument?
#share - total PPP loans lent out by state and day, shift - daily change in PPP lending size total
sbydate <- aggregate(cbind(n,InitialApprovalAmount) ~ OriginatingLenderState + DateApproved, subset(pppm, DateApproved <= '2020-08-08'), sum)
# Regressions
sf3 <- subset(sf2, Date >= as.Date('2020-04-03') & Date <= as.Date('2020-08-08'))
sf3 <- sf3[!duplicated(sf3[c("RSSD", "Date")]),]
sf3 <- sf3 %>% drop_na(RSSD, Date, State, size_quint)
sf3 <- sf3[!sf3$Reserves ==0,]
sf3 <- sf3[!sf3$delt_so_reserves <= 0,]
t1 <- list()
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = 'RSSD')
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'size_quint')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
t1[[1]] <- feols(log(dwsores+1) ~ log(delt_so_reserves) + log(delt_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = 'RSSD')
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'size_quint')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
t1[[4]] <- update(t1[[3]]), .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[4]]
t1 <- list()
t1[[1]] <- feols(log(dwsores) ~ log(delt_so_reserves) + log(delt_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(delt_so_reserves) + log(delt_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + log(reserve_asset_ratio) + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(dwsores ~ log(delt_so_reserves) + log(delt_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(dwsores ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Table 2: Linear model
t1 <- list()
t1[[1]] <- feols(log(dwsores) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves):log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ BInstr)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[4]] <- update(t1[[3]], .~. - log(delt_so_reserves) |.| log(delt_so_reserves) ~ log(BInstr))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1 <- list()
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*LF_30 | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
hist(ppp_so_reservers)
hist(sf3$ppp_so_reservers)
hist(sf3$ppp_so_reserves)
hist(log(sf3$ppp_so_reserves))
hist(log(sf3$dwsores))
hist(log(sf3$dwsores+1))
hist(log(sf3$ppp_so_reserves))
hist(log(sf3$ppp_so_reserves))
hist(log(sf3$ppp_so_reserves+1))
t1[[1]] <- feols(asinh(dwsores) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*LF_30 | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(asinh(dwsores) ~ asinh(ppp_so_reserves) + asinh(ppp_so_reserves)*LF_30 | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(asinh(dwsores) ~ asinh(ppp_so_reserves) + asinh(ppp_so_reserves)*asinh(LF_30) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
hist(t1[[4]]$residuals)
hist(t1[[3]]$residuals)
descr(t1[[3]]$residuals)
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
attach(sf3); log(dwsores+1)
sf3$dwsores
sf3[,c('DW','dwsores')]
sf3[sf3$dwsores == NA,]
View(sf3)
sf3 <- sf3[rowSums(is.na(sf3)) != ncol(sf3), ]
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[1]] <- feols(log(dwsores+1) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = 'RSSD')
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'size_quint')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
t1[[1]] <- feols(c(dwbin_notest,log(dwsores+1)) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30+1) | RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size)
t1[[3]] <- update(t1[[2]], .~. + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]]
etable(t1[[1]])
etable(t1[[1:2]])
etable(t1[[1]],t1[[2]])
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size + log(eqcaprat))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
etable(t1[[1]],t1[[2]], dict=dict1,
cluster = 'State', tex = F)
t1[[2]] <- update(t1[[1]], .~. + reserve_asset_ratio + size + log(eqcaprat))
t1[[2]] <- update(t1[[1]], c(dwbin_notest,log(dwsores+1))~. + reserve_asset_ratio + size + log(eqcaprat))
etable(t1[[1]],t1[[2]], dict=dict1,
cluster = 'RSSD', tex = F)
t1[[2]]
fixef(t1[[1]])
fixef(t1[[2]])
t6[[5]] <- update(t1[[length(t1)]], .~. |. - Date + month)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
#Robustness - Fixed Effects
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
t6[[5]] <- update(t1[[length(t1)]], .~. |. - Date + month)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
#Table 2: Linear model
t1 <- list()
t1[[1]] <- feols(c(dwbin_notest,log(dwsores+1)) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30+1) + reserve_asset_ratio + size + log(eqcaprat)| RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
etable(t1 dict=dict1,
cluster = 'RSSD', tex = F)
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]] <- feols(c(dwbin_notest,log(dwsores+1)) ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30+1) + reserve_asset_ratio + size + log(eqcaprat)| RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t1[[1]]
t1
etable(t1[[1]], dict=dict1,
cluster = 'RSSD', tex = F)
# clustering
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = c('RSSD','Date'))
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = c('RSSD','month'))
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t1
length(t1)
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t1[[1[1]]]
t1[[1]] <- feols(dwbin_notest ~ log(ppp_so_reserves) + log(ppp_so_reserves)*log(LF_30+1) + reserve_asset_ratio + size + log(eqcaprat)| RSSD + Date,
sf3, panel.id = c('RSSD','Date'))
t1[[2]] <- update(t1[[1]], log(dwsores+1) ~.)
etable(t1[[1]], dict=dict1,
cluster = 'RSSD', tex = F)
t1[[2]]
etable(t1, dict=dict1,
cluster = 'RSSD', tex = F)
t6 <- list()
t6[[1]] <- update(t1[[length(t1)]], .~. |. - RSSD - Date)
t6[[2]] <- update(t1[[length(t1)]], .~. |. - RSSD)
t6[[3]] <- update(t1[[length(t1)]], .~. |. - RSSD + FED)
t6[[4]] <- update(t1[[length(t1)]], .~. |. - RSSD + State)
t6[[5]] <- update(t1[[length(t1)]], .~. |. - Date + month)
etable(t1[[length(t1)]], t6, dict=dict1, se='cluster', tex=F, cluster= 'RSSD',
drop = c('Intercept','Size', 'eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','precovdw','age','OFFICES'))
t3 <- list()
t3[[1]] <- update(t1[[length(t1)]], se = 'white')
t3[[2]] <- update(t3[[1]], se = 'cluster', cluster = c('RSSD','Date'))
t3[[3]] <- update(t3[[1]], se = 'cluster', cluster = c('RSSD','month'))
t3[[4]] <- update(t3[[1]], se = 'cluster', cluster = 'FED')
t3[[5]] <- update(t3[[1]], se = 'cluster', cluster = 'State')
etable(t3, dict=dict1, tex=F,
drop = c('eqcaprat','RA Ratio','Asset','Equity','FF Borrowing','Size','exposure'))
sf3$BInstr
sf3$BInstr/sf3$Reserves
descr(sf3$BInstr/sf3$Reserves)
descr(sf3$BInstr*100/sf3$Reserves)
sf3$BInstr <- sf3$BInstr*100/sf3$Reserves
t1[[3]] <- update(t1[[2]], .~. - log(ppp_so_reserves) - log(ppp_so_reserves)*log(LF_30+1) |.| log(ppp_so_reserves) ~ BInstr)
t1[[3]]
t1[[3]] <- update(t1[[2]], .~. - log(ppp_so_reserves) - log(ppp_so_reserves)*log(LF_30+1) |.| log(ppp_so_reserves) ~ log(BInstr))
t1[[3]]
