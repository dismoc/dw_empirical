ta6 <- list()
ta6[[1]] <- update(ta[[2]], .~. - log(pppsores) | . | log(pppsores) ~ log(n+1))
ta6[[2]] <- update(ta6[[1]], subset = sf3$bigsmall == 1)
ta6[[3]] <- update(ta6[[1]], subset = sf3$bigsmall == 0)
ta6[[4]] <- update(ta2[[2]], .~. - log(pppsores) | . | log(pppsores) ~ log(n+1))
ta6[[5]] <- update(ta6[[4]], subset = sf3$bigsmall == 1)
ta6[[6]] <- update(ta6[[4]], subset = sf3$bigsmall == 0)
etable(ta6, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
label = 'main_reg',
headers = c('Pooln+1', 'Large Banks','Small Banks'),
fitstat = ~ n + ivf,
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
tex = FALSE)
# Table 4 - OLS results (Pooled, Large, small) for DW borrowing sizes (aggregate) ----
ta3 <- list()
ta3[[1]] <- feols(log(dwsores+1) ~ log(pppsores+1) | FED , sf4)
ta3[[2]] <- update(ta3[[1]], .~. + log(lfsores+1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw )
ta3[[3]] <- update(ta3[[1]], subset = sf4$bigsmall == 1)
ta3[[4]] <- update(ta3[[2]], subset = sf4$bigsmall == 1)
ta3[[5]] <- update(ta3[[1]], subset = sf4$bigsmall == 0)
ta3[[6]] <- update(ta3[[2]], subset = sf4$bigsmall == 0)
etable(ta3, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 5 - OLS results (Pooled, Large, small) for DW borrowing quantity (aggregate) ----
ta4 <- list()
ta4[[1]] <- feols(log(DW_count+1) ~ log(pppsores+1) | FED, sf4)
ta4[[2]] <- update(ta4[[1]], .~. + log(lfsores+1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw)
ta4[[3]] <- update(ta4[[1]], subset = sf4$bigsmall == 1)
ta4[[4]] <- update(ta4[[2]], subset = sf4$bigsmall == 1)
ta4[[5]] <- update(ta4[[1]], subset = sf4$bigsmall == 0)
ta4[[6]] <- update(ta4[[2]], subset = sf4$bigsmall == 0)
etable(ta4, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 6 - IV Result for DW Borrowing Quantity ----
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+1) ~ log(lfsores+1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+1) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+.01) ~ log(lfsores+.01) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+.01) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+.0001) ~ log(lfsores+.0001) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+.0001) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+.1) ~ log(lfsores+.1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+.0001) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
# Table 6 - IV Result for DW Borrowing Quantity ----
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+.1) ~ log(lfsores+.1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+.1) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(log(dwsores+.01) ~ log(lfsores+.1) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| log(pppsores+.01) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ log(sb_cis) + log(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis) , sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
# Table 6 - IV Result for DW Borrowing Quantity ----
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis) + asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta3 <- list()
ta3[[1]] <- feols(asinh(dwsores) ~ asinh(pppsores) | FED , sf4)
ta3[[2]] <- update(ta3[[1]], .~. + asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw )
ta3[[3]] <- update(ta3[[1]], subset = sf4$bigsmall == 1)
ta3[[4]] <- update(ta3[[2]], subset = sf4$bigsmall == 1)
ta3[[5]] <- update(ta3[[1]], subset = sf4$bigsmall == 0)
ta3[[6]] <- update(ta3[[2]], subset = sf4$bigsmall == 0)
etable(ta3, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 5 - OLS results (Pooled, Large, small) for DW borrowing quantity (aggregate) ----
ta4 <- list()
ta4[[1]] <- feols(asinh(DW_count) ~ asinh(pppsores) | FED, sf4)
ta4[[2]] <- update(ta4[[1]], .~. + asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw)
ta4[[3]] <- update(ta4[[1]], subset = sf4$bigsmall == 1)
ta4[[4]] <- update(ta4[[2]], subset = sf4$bigsmall == 1)
ta4[[5]] <- update(ta4[[1]], subset = sf4$bigsmall == 0)
ta4[[6]] <- update(ta4[[2]], subset = sf4$bigsmall == 0)
etable(ta4, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
sf4$sb_cis <- (sf4$RCON5571)/sf4$RCON1766
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis) + asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
# Table 6 - IV Result for DW Borrowing Quantity ----
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~  asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
sf4 <- aggregate(cbind(PPP, PPPLF, DW, eci, econexpo, covexpo, dwbin_notest, PPPLF_i, ppp_ind) ~ RSSD, sf3, sum)
setnames(sf4, old = c('dwbin_notest','PPPLF_i'), new = c('DW_count','LF_count'))
sf4 <- left_join(sf4, aggregate(cbind(PPPLF_i,DW_i,OFFICES,Reserves, rsa, lsa, dsa, precovdw) ~ RSSD, sf3, mean), by='RSSD')
temp <- subset(df, Date == as.Date('2019-12-31'))
temp$levrat <- temp$RCOA8274/temp$RCOAA224
attach(temp, warn.conflicts = F); temp$instr2 <- rowSums(cbind(RCON5571,RCON5573,RCON5579,RCON5581,RCON5585,RCON5587,RCON5575,RCON5583,RCON5589),na.rm = TRUE)/(RCONB529) #
sf4 <- left_join(sf4, data.frame(temp[,c('IDRSSD','RCON2170','RCON5563','RCON5571','RCON5573','RCON5575','RCON1766','FED','levrat','Primary.ABA.Routing.Number','RCON0081','RCON0071','instr2')]), by=c('RSSD' = 'IDRSSD'))
temp <- subset(dwborrow, Loan.date <= as.Date('2020-03-01')) %>% group_by(Borrower.ABA.number) %>% count()
temp$Borrower.ABA.number <- as.numeric(temp$Borrower.ABA.number)
sf4 <- left_join(sf4, temp, by=c('Primary.ABA.Routing.Number' = 'Borrower.ABA.number'))
sf4$n <- ifelse(is.na(sf4$n) == TRUE, 0, sf4$n)
sf4$sb_cis <- (sf4$RCON5571)/sf4$RCON1766
sf4$bigsmall <- ifelse(sf4$RCON2170 > 600000,1,0)
sf4$Reserves <- 1000*(sf4$RCON0071 + sf4$RCON0081)
sf4$pppsores <- sf4$PPP/sf4$Reserves
sf4$dwsores <- sf4$DW/sf4$Reserves
sf4$lfsores <- sf4$PPPLF/sf4$Reserves
list <- c('pppsores','dwsores','lfsores','eci','econexpo','covexpo','rsa','lsa','dsa','OFFICES','sb_cis','n','levrat','instr2')
temp
sf4 <- aggregate(cbind(PPP, PPPLF, DW, eci, econexpo, covexpo, dwbin_notest, PPPLF_i, ppp_ind) ~ RSSD, sf3, sum)
setnames(sf4, old = c('dwbin_notest','PPPLF_i'), new = c('DW_count','LF_count'))
sf4 <- left_join(sf4, aggregate(cbind(PPPLF_i,DW_i,OFFICES,Reserves, rsa, lsa, dsa, precovdw) ~ RSSD, sf3, mean), by='RSSD')
temp <- subset(df, Date == as.Date('2019-12-31'))
temp$levrat <- temp$RCOA8274/temp$RCOAA224
attach(temp, warn.conflicts = F); temp$instr2 <- rowSums(cbind(RCON5571,RCON5573,RCON5579,RCON5581,RCON5585,RCON5587,RCON5575,RCON5583,RCON5589),na.rm = TRUE)/(RCONB529) #
temp
sf4 <- left_join(sf4, data.frame(temp[,c('IDRSSD','RCON2170','RCON5563','RCON5571','RCON5573','RCON5575','RCON1766','FED','levrat','Primary.ABA.Routing.Number','RCON0081','RCON0071','instr2')]), by=c('RSSD' = 'IDRSSD'))
temp <- subset(dwborrow, Loan.date <= as.Date('2020-03-01')) %>% group_by(Borrower.ABA.number) %>% count()
temp$Borrower.ABA.number <- as.numeric(temp$Borrower.ABA.number)
sf4 <- left_join(sf4, temp, by=c('Primary.ABA.Routing.Number' = 'Borrower.ABA.number'))
sf4$n <- ifelse(is.na(sf4$n) == TRUE, 0, sf4$n)
sf4$sb_cis <- (sf4$RCON5571)/sf4$RCON1766
sf4$bigsmall <- ifelse(sf4$RCON2170 > 600000,1,0)
sf4$Reserves <- 1000*(sf4$RCON0071 + sf4$RCON0081)
sf4$pppsores <- sf4$PPP/sf4$Reserves
sf4$dwsores <- sf4$DW/sf4$Reserves
sf4$lfsores <- sf4$PPPLF/sf4$Reserves
list <- c('pppsores','dwsores','lfsores','eci','econexpo','covexpo','rsa','lsa','dsa','OFFICES','sb_cis','n','levrat','instr2')
sf4$n.x
# Cross Sectional Data Creation - Aggregating all daily info during covid to a cross section ----
sf4 <- aggregate(cbind(PPP, PPPLF, DW, eci, econexpo, covexpo, dwbin_notest, PPPLF_i, ppp_ind) ~ RSSD, sf3, sum)
setnames(sf4, old = c('dwbin_notest','PPPLF_i'), new = c('DW_count','LF_count'))
sf4 <- left_join(sf4, aggregate(cbind(PPPLF_i,DW_i,OFFICES,Reserves, rsa, lsa, dsa, precovdw) ~ RSSD, sf3, mean), by='RSSD')
temp <- subset(df, Date == as.Date('2019-12-31'))
temp$levrat <- temp$RCOA8274/temp$RCOAA224
attach(temp, warn.conflicts = F); temp$instr2 <- rowSums(cbind(RCON5571,RCON5573,RCON5579,RCON5581,RCON5585,RCON5587,RCON5575,RCON5583,RCON5589),na.rm = TRUE)/(RCONB529) #
sf4 <- left_join(sf4, data.frame(temp[,c('IDRSSD','RCON2170','RCON5563','RCON5571','RCON5573','RCON5575','RCON1766','FED','levrat','Primary.ABA.Routing.Number','RCON0081','RCON0071','instr2')]), by=c('RSSD' = 'IDRSSD'))
temp <- subset(dwborrow, Loan.date <= as.Date('2020-03-01')) %>% group_by(Borrower.ABA.number) %>% count()
temp$Borrower.ABA.number <- as.numeric(temp$Borrower.ABA.number)
sf4 <- left_join(sf4, temp, by=c('Primary.ABA.Routing.Number' = 'Borrower.ABA.number'))
aggregate(cbind(PPP, PPPLF, DW, eci, econexpo, covexpo, dwbin_notest, PPPLF_i, ppp_ind) ~ RSSD, sf3, sum)
# Cross Sectional Data Creation - Aggregating all daily info during covid to a cross section ----
sf4 <- aggregate(cbind(PPP, PPPLF, DW, eci, covexpo, dwbin_notest, PPPLF_i, ppp_ind) ~ RSSD, sf3, sum)
setnames(sf4, old = c('dwbin_notest','PPPLF_i'), new = c('DW_count','LF_count'))
sf4 <- left_join(sf4, aggregate(cbind(PPPLF_i,DW_i,OFFICES,Reserves, rsa, lsa, dsa, precovdw) ~ RSSD, sf3, mean), by='RSSD')
temp <- subset(df, Date == as.Date('2019-12-31'))
temp$levrat <- temp$RCOA8274/temp$RCOAA224
attach(temp, warn.conflicts = F); temp$instr2 <- rowSums(cbind(RCON5571,RCON5573,RCON5579,RCON5581,RCON5585,RCON5587,RCON5575,RCON5583,RCON5589),na.rm = TRUE)/(RCONB529) #
sf4 <- left_join(sf4, data.frame(temp[,c('IDRSSD','RCON2170','RCON5563','RCON5571','RCON5573','RCON5575','RCON1766','FED','levrat','Primary.ABA.Routing.Number','RCON0081','RCON0071','instr2')]), by=c('RSSD' = 'IDRSSD'))
temp <- subset(dwborrow, Loan.date <= as.Date('2020-03-01')) %>% group_by(Borrower.ABA.number) %>% count()
temp$Borrower.ABA.number <- as.numeric(temp$Borrower.ABA.number)
sf4 <- left_join(sf4, temp, by=c('Primary.ABA.Routing.Number' = 'Borrower.ABA.number'))
sf4$n <- ifelse(is.na(sf4$n) == TRUE, 0, sf4$n)
sf4$sb_cis <- (sf4$RCON5571)/sf4$RCON1766
sf4$bigsmall <- ifelse(sf4$RCON2170 > 600000,1,0)
sf4$Reserves <- 1000*(sf4$RCON0071 + sf4$RCON0081)
sf4$pppsores <- sf4$PPP/sf4$Reserves
sf4$dwsores <- sf4$DW/sf4$Reserves
sf4$lfsores <- sf4$PPPLF/sf4$Reserves
# Table 4 - OLS results (Pooled, Large, small) for DW borrowing sizes (aggregate) ----
ta3 <- list()
ta3[[1]] <- feols(asinh(dwsores) ~ asinh(pppsores) | FED , sf4)
ta3[[2]] <- update(ta3[[1]], .~. + asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw )
ta3[[3]] <- update(ta3[[1]], subset = sf4$bigsmall == 1)
ta3[[4]] <- update(ta3[[2]], subset = sf4$bigsmall == 1)
ta3[[5]] <- update(ta3[[1]], subset = sf4$bigsmall == 0)
ta3[[6]] <- update(ta3[[2]], subset = sf4$bigsmall == 0)
etable(ta3, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 5 - OLS results (Pooled, Large, small) for DW borrowing quantity (aggregate) ----
ta4 <- list()
ta4[[1]] <- feols(asinh(DW_count) ~ asinh(pppsores) | FED, sf4)
ta4[[2]] <- update(ta4[[1]], .~. + asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw)
ta4[[3]] <- update(ta4[[1]], subset = sf4$bigsmall == 1)
ta4[[4]] <- update(ta4[[2]], subset = sf4$bigsmall == 1)
ta4[[5]] <- update(ta4[[1]], subset = sf4$bigsmall == 0)
ta4[[6]] <- update(ta4[[2]], subset = sf4$bigsmall == 0)
etable(ta4, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 4 - OLS results (Pooled, Large, small) for DW borrowing sizes (aggregate) ----
ta3 <- list()
ta3[[1]] <- feols(asinh(dwsores) ~ asinh(pppsores) | FED , sf4)
ta3[[2]] <- update(ta3[[1]], .~. + asinh(lfsores) + asinh(eci) +  asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw )
ta3[[3]] <- update(ta3[[1]], subset = sf4$bigsmall == 1)
ta3[[4]] <- update(ta3[[2]], subset = sf4$bigsmall == 1)
ta3[[5]] <- update(ta3[[1]], subset = sf4$bigsmall == 0)
ta3[[6]] <- update(ta3[[2]], subset = sf4$bigsmall == 0)
etable(ta3, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
# Table 5 - OLS results (Pooled, Large, small) for DW borrowing quantity (aggregate) ----
ta4 <- list()
ta4[[1]] <- feols(asinh(DW_count) ~ asinh(pppsores) | FED, sf4)
ta4[[2]] <- update(ta4[[1]], .~. + asinh(lfsores) + asinh(eci) +asinh(covexpo) + asinh(OFFICES) + log(RCON2170) + levrat + rsa + lsa + dsa + precovdw)
ta4[[3]] <- update(ta4[[1]], subset = sf4$bigsmall == 1)
ta4[[4]] <- update(ta4[[2]], subset = sf4$bigsmall == 1)
ta4[[5]] <- update(ta4[[1]], subset = sf4$bigsmall == 0)
ta4[[6]] <- update(ta4[[2]], subset = sf4$bigsmall == 0)
etable(ta4, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Pooled','Large Banks', 'Large Banks','Small Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores')),
fitstat = ~n + r2,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) + asinh(econexpo) + asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis) + asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) +asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(instr2), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) +asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
sf4$sb_cis <- (sf4$RCON5571+sf4$RCON5573)/sf4$RCON1766
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) +asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
sf4$sb_cis <- (sf4$RCON5571+sf4$RCON5573+sf4$RCON5575)/sf4$RCON1766
ta5 <- list()
ta5[[1]] <- feols(asinh(dwsores) ~ asinh(lfsores) + asinh(eci) +asinh(covexpo) + asinh(OFFICES) +
log(RCON2170) + levrat + rsa + lsa + dsa + precovdw | FED| asinh(pppsores) ~ asinh(sb_cis), sf4)
ta5[[2]] <- update(ta5[[1]], subset = sf4$bigsmall == 1)
ta5[[3]] <- update(ta5[[1]], subset = sf4$bigsmall == 0)
ta5[[4]] <- update(ta5[[1]], log(DW_count+1) ~.)
ta5[[5]] <- update(ta5[[4]], subset = sf4$bigsmall == 1)
ta5[[6]] <- update(ta5[[4]], subset = sf4$bigsmall == 0)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'iid',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
etable(ta5, dict = dict1,
title = 'OLS Estimation of Log DW Borrowing',
se = 'white',
label = 'aggregate_quant_reg',
headers = c('Pooled','Large Banks','Small Banks'),
group = list('Controls:'=c('lsa','rsa','dsa','Equity Cap Ratio','Log Assets','Log RA Ratio','econexpo','COVID Exposure','eci','npplsores','precovdw','covexpo','OFFICES','levrat')),
fitstat = ~ n + ivf + sargan,
tex = FALSE)
